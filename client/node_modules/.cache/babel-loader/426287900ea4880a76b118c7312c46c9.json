{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Amarjeet Kumar\\\\Desktop\\\\final\\\\client\\\\src\\\\Components\\\\Login.js\",\n    _s = $RefreshSig$();\n\n// ---------------- COPYRIGHT & CONFIDENTIALITY ----------------\n//  Copyright (c) [2025] [Rasa Consultancy Services]. All rights reserved. \n//  This software is the confidential and proprietary information of [Rasa Consultancy Services]. \n//  You shall not disclose such confidential information and shall use it only in accordance \n//  with the license agreement you entered into with [Rasa Consultancy Services].\n//  For more information, please contact: [Your Company Email/Legal Department Contact] \nimport React, { useState, useEffect } from \"react\";\nimport axios from \"../Services/axiosInterceptor\"; // Axios instance with interceptors\n\nimport \"../css/signIn.css\"; // CSS styles for login form\n\nimport Captcha from \"./Captcha\"; // Custom CAPTCHA component\n\nimport Cookies from \"js-cookie\"; // For handling cookies (token, rememberMe, etc.)\n\nimport { useNavigate } from \"react-router-dom\"; // For page navigation\n\nimport { auth, googleProvider } from \"../firebaseConfig/FireConFig\"; // Firebase auth\n\nimport { FacebookAuthProvider, signInWithPopup, fetchSignInMethodsForEmail } from \"firebase/auth\"; // Firebase social login utilities\n\nimport { ToastContainer, toast } from \"react-toastify\"; // Toast notifications\n\nimport \"react-toastify/dist/ReactToastify.css\";\nimport refreshIcon from \"../images/refresh-removebg-preview.png\"; // CAPTCHA refresh icon\n\nimport emailicon from '../images/tl.webp'; // Email icon\n\nimport pwd from \"../images/password-76.png\"; // Password icon\n\nimport audios from \"../sound/success-340660.mp3\"; // Success audio\n// ---------------- UTILITY FUNCTIONS ----------------\n// Base64 encode/decode for storing password in cookies\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst encode = str => btoa(str);\n\nconst decode = str => atob(str); // ---------------- MAIN COMPONENT ----------------\n\n\nconst Login = () => {\n  _s();\n\n  const navigate = useNavigate(); // For redirecting pages\n  // ---------------- FORM STATE ----------------\n\n  const [input, setInput] = useState({\n    email: \"\",\n    password: \"\"\n  }); // Stores email & password\n\n  const [passwordVisible, setPasswordVisible] = useState(false); // Toggle password visibility\n\n  const [rememberMe, setRememberMe] = useState(false); // Remember Me checkbox state\n  // ---------------- OTP STATE ----------------\n\n  const [showOtpForm, setShowOtpForm] = useState(false); // Toggle OTP form\n\n  const [otp, setOtp] = useState(\"\"); // OTP input\n\n  const [userEmail, setUserEmail] = useState(\"\"); // Email for OTP verification\n\n  const [timer, setTimer] = useState(180); // OTP countdown in seconds\n\n  const [canResend, setCanResend] = useState(false); // Enable \"Resend OTP\" button\n  // ---------------- LOCKOUT STATE ----------------\n\n  const [lockTimer, setLockTimer] = useState(0); // Lock countdown timer\n\n  const [failedAttempts, setFailedAttempts] = useState(0); // Track login attempts\n\n  const LOCK_DURATION = 15 * 60; // 15 minutes lock duration\n  // ---------------- DEVICE ENFORCEMENT ----------------\n\n  const [showDevicePrompt, setShowDevicePrompt] = useState(false); // Show device login prompt\n\n  const [pendingToken, setPendingToken] = useState(null); // Token for forced login\n\n  const [pendingEmail, setPendingEmail] = useState(null); // Email for forced login\n  // ---------------- CAPTCHA STATE ----------------\n\n  const generateRandomCode = function () {\n    let length = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 5;\n    const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    let code = \"\";\n\n    for (let i = 0; i < length; i++) {\n      code += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n\n    return code;\n  }; // ---------------- OTP ANIMATION STATE ----------------\n\n\n  const [randomCode, setRandomCode] = useState(generateRandomCode());\n  const [userCode, setUserCode] = useState(\"\"); // ---------------- OTP Animation State ----------------\n\n  const [otpError, setOtpError] = useState(false);\n  const [otpSuccess, setOtpSuccess] = useState(false); // ---------------- Load remembered credentials ----------------\n\n  useEffect(() => {\n    const savedData = Cookies.get(\"rememberData\");\n\n    if (savedData) {\n      try {\n        const {\n          email,\n          password\n        } = JSON.parse(savedData);\n        setInput({\n          email: email || \"\",\n          password: password ? decode(password) : \"\"\n        });\n        setRememberMe(true);\n      } catch {\n        setInput(prev => ({ ...prev,\n          email: savedData\n        }));\n        setRememberMe(true);\n      }\n    }\n  }, []); // ---------------- PLAY SUCCESS AUDIO ----------------\n\n  const veriFyOtpSound = () => {\n    try {\n      const OutSound = new Audio(audios); // use imported audio\n\n      OutSound.volume = 0.8;\n      OutSound.play().catch(() => {\n        console.warn(\"âš ï¸ Login sound playback blocked by browser until user interaction.\");\n      });\n    } catch (err) {\n      console.warn(\"âš ï¸ Audio play error:\", err.message);\n    }\n  }; // ---------------- OTP Countdown ----------------\n\n\n  useEffect(() => {\n    let interval;\n\n    if (showOtpForm && timer > 0) {\n      interval = setInterval(() => setTimer(prev => prev - 1), 1000);\n    } else if (timer <= 0 && showOtpForm) {\n      setCanResend(true);\n      toast.error(\"OTP expired! Please resend.\");\n    }\n\n    return () => clearInterval(interval);\n  }, [showOtpForm, timer]); // ---------------- Save Remember Me ----------------\n\n  const saveRememberMe = (email, password) => {\n    if (rememberMe) {\n      Cookies.set(\"rememberData\", JSON.stringify({\n        email,\n        password: encode(password)\n      }), {\n        expires: 30,\n        secure: true,\n        sameSite: \"Strict\"\n      });\n    } else {\n      Cookies.remove(\"rememberData\");\n    }\n  }; // ---------------- Lockout Countdown ----------------\n\n\n  useEffect(() => {\n    let lockInterval;\n\n    if (lockTimer > 0) {\n      lockInterval = setInterval(() => setLockTimer(prev => prev - 1), 1000);\n    }\n\n    return () => clearInterval(lockInterval);\n  }, [lockTimer]);\n\n  const formatTime = sec => {\n    const m = Math.floor(sec / 60).toString().padStart(2, \"0\");\n    const s = (sec % 60).toString().padStart(2, \"0\");\n    return `${m}:${s}`;\n  }; // ---------------- Send OTP / Login ----------------\n\n\n  const sendOtp = async () => {\n    if (lockTimer > 0) {\n      return toast.error(`Account locked! Try again in ${formatTime(lockTimer)}`);\n    }\n\n    try {\n      const response = await axios.post(\"/api/auth/users/login\", input, {\n        timeout: 6000\n      });\n\n      if (response.data.otpSent) {\n        veriFyOtpSound();\n        toast.success(\"OTP sent to your email!\");\n        setShowOtpForm(true);\n        setUserEmail(input.email);\n        setOtp(\"\");\n        setTimer(180);\n        setCanResend(false);\n      } else if (response.data.token) {\n        var _response$data$user, _response$data$user2;\n\n        // -------- Set Cookies --------\n        Cookies.set(\"token\", response.data.token, {\n          expires: 7,\n          secure: true,\n          sameSite: \"Strict\"\n        });\n        Cookies.set(\"name\", ((_response$data$user = response.data.user) === null || _response$data$user === void 0 ? void 0 : _response$data$user.Fname) || \"\", {\n          expires: 7,\n          secure: true,\n          sameSite: \"Strict\"\n        });\n        Cookies.set(\"email\", ((_response$data$user2 = response.data.user) === null || _response$data$user2 === void 0 ? void 0 : _response$data$user2.email) || input.email, {\n          expires: 7,\n          secure: true,\n          sameSite: \"Strict\"\n        }); // NEW\n\n        saveRememberMe(input.email, input.password); //  Save Remember Me\n\n        if (rememberMe) {\n          Cookies.set(\"rememberData\", JSON.stringify({\n            email: input.email,\n            password: encode(input.password)\n          }));\n        } else {\n          Cookies.remove(\"rememberData\");\n        }\n\n        toast.success(\"Login successful!\");\n        setFailedAttempts(0);\n        navigate(\"/\");\n      } else {\n        toast.error(\"Unexpected response from server\");\n      }\n    } catch (err) {\n      var _err$response;\n\n      console.error(\"Send OTP error:\", err);\n\n      if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401) {\n        setFailedAttempts(prev => {\n          const newCount = prev + 1;\n\n          if (newCount >= 5) {\n            setLockTimer(LOCK_DURATION);\n            toast.error(\"Too many failed attempts. Account locked for 15 minutes.\");\n            return 0;\n          } else {\n            toast.error(`Wrong credentials! Attempt ${newCount} of 5`);\n          }\n\n          return newCount;\n        });\n      } else {\n        var _err$response2, _err$response2$data;\n\n        toast.error(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || \"Login failed\");\n      }\n    }\n  }; // ---------------- Verify OTP ----------------\n\n\n  const handleOtpVerify = async e => {\n    e.preventDefault();\n    if (!otp) return toast.error(\"Please enter OTP\");\n\n    try {\n      var _response$data$user3, _response$data$user4;\n\n      const response = await axios.post(\"/api/auth/verify-otp\", {\n        email: userEmail,\n        otp\n      }, {\n        timeout: 10000\n      });\n\n      if (response.data.forceLogout) {\n        setShowDevicePrompt(true);\n        setPendingToken(response.data.token);\n        setPendingEmail(userEmail);\n        return;\n      } // -------- Set Cookies --------\n\n\n      Cookies.set(\"token\", response.data.token, {\n        expires: 7,\n        secure: true,\n        sameSite: \"Strict\"\n      });\n      Cookies.set(\"name\", ((_response$data$user3 = response.data.user) === null || _response$data$user3 === void 0 ? void 0 : _response$data$user3.Fname) || \"\", {\n        expires: 7,\n        secure: true,\n        sameSite: \"Strict\"\n      });\n      Cookies.set(\"email\", ((_response$data$user4 = response.data.user) === null || _response$data$user4 === void 0 ? void 0 : _response$data$user4.email) || userEmail, {\n        expires: 7,\n        secure: true,\n        sameSite: \"Strict\"\n      });\n      saveRememberMe(userEmail, input.password); // NEW\n\n      if (rememberMe) {\n        Cookies.set(\"rememberData\", JSON.stringify({\n          email: input.email,\n          password: encode(input.password)\n        }), {\n          expires: 30,\n          secure: true,\n          sameSite: \"Strict\"\n        } // 30 days for Remember Me\n        );\n      } else {\n        Cookies.remove(\"rememberData\");\n      }\n\n      toast.success(\"OTP verified! Login successful\");\n      navigate(\"/\");\n    } catch (err) {\n      var _err$response3;\n\n      console.error(\"OTP verification error:\", err);\n\n      if (((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.status) === 401) {\n        navigate(\"/session-expire\");\n      } else {\n        var _err$response4, _err$response4$data;\n\n        toast.error(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.message) || \"OTP verification failed\");\n      }\n    }\n  }; // ---------------- Force Login ----------------\n\n\n  const forceLogin = async () => {\n    veriFyOtpSound();\n\n    try {\n      const response = await axios.post(\"/api/auth/users/forceLogout\", {\n        token: pendingToken,\n        email: pendingEmail\n      });\n\n      if (response.data.token) {\n        var _response$data$user5, _response$data$user6;\n\n        Cookies.set(\"token\", response.data.token, {\n          expires: 7,\n          secure: true,\n          sameSite: \"Strict\"\n        });\n        Cookies.set(\"name\", ((_response$data$user5 = response.data.user) === null || _response$data$user5 === void 0 ? void 0 : _response$data$user5.Fname) || \"\", {\n          expires: 7,\n          secure: true,\n          sameSite: \"Strict\"\n        });\n        Cookies.set(\"email\", ((_response$data$user6 = response.data.user) === null || _response$data$user6 === void 0 ? void 0 : _response$data$user6.email) || pendingEmail, {\n          expires: 7,\n          secure: true,\n          sameSite: \"Strict\"\n        }); // NEW\n\n        saveRememberMe(input.email, input.password);\n        toast.success(\"Logged in successfully! Previous session ended.\");\n        setShowDevicePrompt(false);\n        navigate(\"/\");\n      } else {\n        toast.error(\"Force login failed: No token returned\");\n      }\n    } catch (err) {\n      var _err$response5, _err$response5$data;\n\n      console.error(\"Force login error:\", err);\n      toast.error(((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.message) || \"Force login failed\");\n      setShowDevicePrompt(false);\n    }\n  };\n\n  const cancelForceLogin = () => {\n    setShowDevicePrompt(false);\n    setPendingToken(null);\n    setPendingEmail(null);\n    setOtp(\"\");\n    toast.info(\"Login cancelled. Redirecting to login page...\");\n    navigate(\"/login\");\n  }; // ---------------- Google Login ----------------\n\n\n  const googleSign = async () => {\n    try {\n      const result = await signInWithPopup(auth, googleProvider);\n      const user = result.user;\n      const response = await axios.post(\"/api/auth/users/google-login\", {\n        email: user.email,\n        uid: user.uid,\n        name: user.displayName,\n        photoURL: user.photoURL\n      }, {\n        timeout: 10000\n      });\n\n      if (response.data.isNewUser) {\n        toast.info(\"Email not registered! Please register first.\");\n        setTimeout(() => navigate(\"/register\"), 3000);\n        return;\n      }\n\n      if (response.data.token) {\n        // -------- Set Cookies --------\n        Cookies.set(\"token\", response.data.token, {\n          expires: 7,\n          secure: true,\n          sameSite: \"Strict\"\n        });\n        Cookies.set(\"name\", user.displayName, {\n          expires: 7,\n          secure: true,\n          sameSite: \"Strict\"\n        });\n        Cookies.set(\"email\", user.email, {\n          expires: 7,\n          secure: true,\n          sameSite: \"Strict\"\n        }); // NEW\n\n        saveRememberMe(input.email, input.password);\n        toast.success(\"Login successful!\");\n        navigate(\"/\");\n      }\n    } catch (err) {\n      console.error(\"Google login error:\", err);\n\n      if (err.code === \"auth/account-exists-with-different-credential\") {\n        const methods = await fetchSignInMethodsForEmail(auth, err.customData.email);\n        toast.error(`An account with this email already exists with ${methods[0]}. Please use that provider to login.`);\n      } else if (err.code === \"auth/popup-closed-by-user\") {\n        toast.info(\"Login cancelled. You closed the popup.\");\n      } else if (err.code === \"auth/cancelled-popup-request\") {\n        toast.info(\"Cancelled popup request. Please try again.\");\n      } else {\n        toast.error(err.message || \"Google login failed\");\n      }\n    }\n  }; // ---------------- Facebook Login ----------------\n\n\n  const facebookSign = async () => {\n    const facebookProvider = new FacebookAuthProvider();\n\n    try {\n      const result = await signInWithPopup(auth, facebookProvider);\n      const user = result.user;\n      const response = await axios.post(\"/api/auth/users/facebook-login\", {\n        email: user.email,\n        uid: user.uid,\n        name: user.displayName,\n        photoURL: user.photoURL\n      }, {\n        timeout: 10000\n      });\n\n      if (response.data.forceLogout) {\n        setShowDevicePrompt(true);\n        setPendingToken(response.data.token);\n        setPendingEmail(user.email);\n        return;\n      }\n\n      if (response.data.token) {\n        // -------- Set Cookies --------\n        Cookies.set(\"token\", response.data.token, {\n          expires: 7,\n          secure: true,\n          sameSite: \"Strict\"\n        });\n        Cookies.set(\"name\", user.displayName, {\n          expires: 7,\n          secure: true,\n          sameSite: \"Strict\"\n        });\n        Cookies.set(\"email\", user.email, {\n          expires: 7,\n          secure: true,\n          sameSite: \"Strict\"\n        }); // NEW\n\n        toast.success(\"Facebook login successful!\");\n        saveRememberMe(input.email, input.password);\n        navigate(\"/\");\n      }\n    } catch (error) {\n      console.error(\"Facebook login error:\", error);\n\n      if (error.code === \"auth/account-exists-with-different-credential\") {\n        const methods = await fetchSignInMethodsForEmail(auth, error.customData.email);\n        toast.error(`An account with this email already exists with ${methods[0]}. Please use that provider to login.`);\n      } else if (error.code === \"auth/popup-closed-by-user\") {\n        toast.info(\"Login cancelled. You closed the popup.\");\n      } else if (error.code === \"auth/cancelled-popup-request\") {\n        toast.info(\"Cancelled popup request. Please try again.\");\n      } else {\n        toast.error(error.message || \"Facebook login failed\");\n      }\n    }\n  }; // ---------------- Render UI ----------------\n\n\n  if (lockTimer > 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-lg shadow-md w-96 singform text-center\",\n      children: [/*#__PURE__*/_jsxDEV(ToastContainer, {\n        position: \"top-right\",\n        autoClose: 3000\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold mb-4 text-center\",\n        children: \"Account Locked\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mb-4 text-red-500\",\n        children: \"Too many failed login attempts.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-700\",\n        children: \"Please try again after:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xl font-bold mt-2\",\n        children: formatTime(lockTimer)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\",\n        onClick: () => navigate(\"/register\"),\n        children: \"Sign Up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 7\n    }, this);\n  }\n\n  if (showDevicePrompt) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-lg shadow-md w-96 singform text-center\",\n      children: [/*#__PURE__*/_jsxDEV(ToastContainer, {\n        position: \"top-right\",\n        autoClose: 3000\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-bold mb-4\",\n        children: \"\\u26A0\\uFE0F You're currently logged in on another device\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mb-4\",\n        children: \"Logging in here will sign you out from that session.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-around mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: forceLogin,\n          className: \"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600\",\n          children: \"Proceed to Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: cancelForceLogin,\n          className: \"px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-3 rounded-lg shadow-md w-96 singform gray-500 mag \",\n    children: [/*#__PURE__*/_jsxDEV(ToastContainer, {\n      position: \"top-right\",\n      autoClose: 3000\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-4 text-center \",\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 7\n    }, this), !showOtpForm ? /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"space-y-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"tex\",\n        children: [\"Email Address \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"requiredStar\",\n          children: \"*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 44\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"w-8 m-auto \",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: emailicon\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 43\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          name: \"email\",\n          placeholder: \"Enter Email\",\n          value: input.email,\n          className: \"inputBox p-2 w-full border rounded\",\n          onChange: e => setInput({ ...input,\n            [e.target.name]: e.target.value\n          }),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"tex\",\n        children: [\"Password \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"requiredStar\",\n          children: \"*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 39\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"w-8 m-auto \",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: pwd\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 43\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: passwordVisible ? \"text\" : \"password\",\n          name: \"password\",\n          placeholder: \"Enter Password\",\n          value: input.password,\n          className: \"inputBox p-2 w-full border rounded\",\n          onChange: e => setInput({ ...input,\n            [e.target.name]: e.target.value\n          }),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer\",\n          onClick: () => setPasswordVisible(!passwordVisible),\n          children: passwordVisible ? \"Hide\" : \"ðŸ‘ï¸\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2 mt-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: rememberMe,\n          onChange: e => setRememberMe(e.target.checked),\n          id: \"rememberMe\",\n          className: \"cursor-pointer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"rememberMe\",\n          className: \"cursor-pointer text-sm\",\n          children: \"Remember Me\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"flex tex items-center justify-between\",\n          children: \"Enter the code below:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 514,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \" flex gap-9\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(Captcha, {\n              code: randomCode,\n              onChange: () => setRandomCode(generateRandomCode())\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 517,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 516,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ref-btn\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: refreshIcon,\n              alt: \"refresh captcha\",\n              className: \"refresh-icon w-8 m-2 \",\n              onClick: () => setRandomCode(generateRandomCode()),\n              style: {\n                cursor: \"pointer\",\n                marginLeft: \"10px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 523,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: userCode,\n          placeholder: \"Type the code here\",\n          onChange: e => setUserCode(e.target.value),\n          className: \"w-full p-2 border rounded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: sendOtp,\n        disabled: userCode !== randomCode,\n        className: `login w-full py-2 rounded mt-2 ${userCode === randomCode ? \"bg-red-500 text-white\" : \"bg-gray-300 text-yellow-100 cursor-not-allowed\"}`,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 542,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"singbtn w-full text-end underline font-medium cursor-pointer\",\n        onClick: () => navigate(\"/reset-password\"),\n        children: \"Forgot Password?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 554,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center my-3\",\n        children: \"Or\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 561,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: googleSign,\n        className: \"social-button google-btn w-full mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://www.google.com/favicon.ico\",\n          alt: \"Google Logo\",\n          className: \"icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 13\n        }, this), \"Continue with Google\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: facebookSign,\n        className: \"social-button facebook-btn w-full mt-2 bg-blue-600 text-white flex items-center justify-center gap-2 py-2 rounded hover:bg-blue-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://www.facebook.com/images/fb_icon_325x325.png\",\n          alt: \"Facebook Logo\",\n          className: \"icon w-5 h-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 582,\n          columnNumber: 13\n        }, this), \"Continue with Facebook\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-center mt-3\",\n        children: [\"Don\\u2019t have an account?\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"singbtn cursor-pointer font-medium underline\",\n          onClick: () => navigate(\"/register\"),\n          children: \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 601,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 599,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleOtpVerify,\n      className: \"space-y-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Enter the 6-digit OTP sent to \", userEmail]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 611,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `flex justify-between gap-2 mb-2 transition-transform duration-300 ${otpError ? \"animate-shake\" : otpSuccess ? \"animate-glow\" : \"\"}`,\n        children: [0, 1, 2, 3, 4, 5].map(i => {\n          const isDigitValid = /^\\d$/.test(otp[i] || \"\");\n          return /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            maxLength: 1,\n            value: otp[i] || \"\",\n            id: `otp-${i}`,\n            className: `w-12 h-12 text-center border rounded-md text-xl transition focus:ring-2 focus:ring-blue-400 ${otp[i] ? isDigitValid ? \"border-green-500\" : \"border-red-500\" : \"border-gray-300\"}`,\n            onChange: e => {\n              const val = e.target.value;\n              if (!/^\\d?$/.test(val)) return; // only digits\n\n              const newOtp = otp.split(\"\");\n              newOtp[i] = val;\n              setOtp(newOtp.join(\"\")); // auto-focus next input\n\n              if (val && i < 5) {\n                const nextInput = document.getElementById(`otp-${i + 1}`);\n                nextInput && nextInput.focus();\n              }\n            },\n            onKeyDown: e => {\n              // Handle backspace\n              if (e.key === \"Backspace\") {\n                e.preventDefault(); // prevent default backspace behavior\n\n                const newOtp = otp.split(\"\");\n                newOtp[i] = \"\"; // clear current box\n\n                setOtp(newOtp.join(\"\"));\n\n                if (i > 0) {\n                  const prevInput = document.getElementById(`otp-${i - 1}`);\n                  prevInput && prevInput.focus();\n                }\n              }\n            },\n            onPaste: e => {\n              e.preventDefault();\n              const pasteData = e.clipboardData.getData(\"Text\").trim().slice(0, 6);\n              if (!/^\\d+$/.test(pasteData)) return; // only allow digits\n\n              const pasteArray = pasteData.split(\"\");\n              const newOtp = [...otp.split(\"\")];\n\n              for (let j = 0; j < 6; j++) {\n                newOtp[j] = pasteArray[j] || \"\";\n              }\n\n              setOtp(newOtp.join(\"\"));\n              const nextInput = document.getElementById(`otp-${pasteArray.length - 1}`);\n              nextInput && nextInput.focus();\n            }\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 619,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 612,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-500\",\n        children: [\"OTP expires in: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-semibold\",\n          children: formatTime(timer)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 679,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 678,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"login w-full bg-green-500 text-white py-2 rounded\",\n        children: \"Verify OTP\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 681,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        disabled: !canResend,\n        onClick: sendOtp,\n        className: `w-full py-2 rounded ${canResend ? \"bg-blue-500 text-white\" : \"bg-gray-300 text-gray-500 cursor-not-allowed\"}`,\n        children: \"Resend OTP\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 687,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 610,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 457,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"TkaAdZrtJOPW1ZwhuUhGu8+5ReY=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useEffect","axios","Captcha","Cookies","useNavigate","auth","googleProvider","FacebookAuthProvider","signInWithPopup","fetchSignInMethodsForEmail","ToastContainer","toast","refreshIcon","emailicon","pwd","audios","encode","str","btoa","decode","atob","Login","navigate","input","setInput","email","password","passwordVisible","setPasswordVisible","rememberMe","setRememberMe","showOtpForm","setShowOtpForm","otp","setOtp","userEmail","setUserEmail","timer","setTimer","canResend","setCanResend","lockTimer","setLockTimer","failedAttempts","setFailedAttempts","LOCK_DURATION","showDevicePrompt","setShowDevicePrompt","pendingToken","setPendingToken","pendingEmail","setPendingEmail","generateRandomCode","length","chars","code","i","charAt","Math","floor","random","randomCode","setRandomCode","userCode","setUserCode","otpError","setOtpError","otpSuccess","setOtpSuccess","savedData","get","JSON","parse","prev","veriFyOtpSound","OutSound","Audio","volume","play","catch","console","warn","err","message","interval","setInterval","error","clearInterval","saveRememberMe","set","stringify","expires","secure","sameSite","remove","lockInterval","formatTime","sec","m","toString","padStart","s","sendOtp","response","post","timeout","data","otpSent","success","token","user","Fname","status","newCount","handleOtpVerify","e","preventDefault","forceLogout","forceLogin","cancelForceLogin","info","googleSign","result","uid","name","displayName","photoURL","isNewUser","setTimeout","methods","customData","facebookSign","facebookProvider","target","value","checked","cursor","marginLeft","map","isDigitValid","test","val","newOtp","split","join","nextInput","document","getElementById","focus","key","prevInput","pasteData","clipboardData","getData","trim","slice","pasteArray","j"],"sources":["C:/Users/Amarjeet Kumar/Desktop/final/client/src/Components/Login.js"],"sourcesContent":["// ---------------- COPYRIGHT & CONFIDENTIALITY ----------------\n//  Copyright (c) [2025] [Rasa Consultancy Services]. All rights reserved. \n//  This software is the confidential and proprietary information of [Rasa Consultancy Services]. \n//  You shall not disclose such confidential information and shall use it only in accordance \n//  with the license agreement you entered into with [Rasa Consultancy Services].\n//  For more information, please contact: [Your Company Email/Legal Department Contact] \n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"../Services/axiosInterceptor\"; // Axios instance with interceptors\nimport \"../css/signIn.css\"; // CSS styles for login form\nimport Captcha from \"./Captcha\"; // Custom CAPTCHA component\nimport Cookies from \"js-cookie\"; // For handling cookies (token, rememberMe, etc.)\nimport { useNavigate } from \"react-router-dom\"; // For page navigation\nimport { auth, googleProvider } from \"../firebaseConfig/FireConFig\"; // Firebase auth\nimport {\n  FacebookAuthProvider,\n  signInWithPopup,\n  fetchSignInMethodsForEmail,\n} from \"firebase/auth\"; // Firebase social login utilities\nimport { ToastContainer, toast } from \"react-toastify\"; // Toast notifications\nimport \"react-toastify/dist/ReactToastify.css\";\nimport refreshIcon from \"../images/refresh-removebg-preview.png\"; // CAPTCHA refresh icon\nimport emailicon from '../images/tl.webp'; // Email icon\nimport pwd from \"../images/password-76.png\"; // Password icon\nimport audios from \"../sound/success-340660.mp3\"; // Success audio\n\n// ---------------- UTILITY FUNCTIONS ----------------\n// Base64 encode/decode for storing password in cookies\nconst encode = (str) => btoa(str);\nconst decode = (str) => atob(str);\n\n// ---------------- MAIN COMPONENT ----------------\nconst Login = () => {\n  const navigate = useNavigate(); // For redirecting pages\n\n  // ---------------- FORM STATE ----------------\n  const [input, setInput] = useState({ email: \"\", password: \"\" }); // Stores email & password\n  const [passwordVisible, setPasswordVisible] = useState(false); // Toggle password visibility\n  const [rememberMe, setRememberMe] = useState(false); // Remember Me checkbox state\n\n  // ---------------- OTP STATE ----------------\n  const [showOtpForm, setShowOtpForm] = useState(false); // Toggle OTP form\n  const [otp, setOtp] = useState(\"\"); // OTP input\n  const [userEmail, setUserEmail] = useState(\"\"); // Email for OTP verification\n  const [timer, setTimer] = useState(180); // OTP countdown in seconds\n  const [canResend, setCanResend] = useState(false); // Enable \"Resend OTP\" button\n\n  // ---------------- LOCKOUT STATE ----------------\n  const [lockTimer, setLockTimer] = useState(0); // Lock countdown timer\n  const [failedAttempts, setFailedAttempts] = useState(0); // Track login attempts\n  const LOCK_DURATION = 15 * 60; // 15 minutes lock duration\n\n  // ---------------- DEVICE ENFORCEMENT ----------------\n  const [showDevicePrompt, setShowDevicePrompt] = useState(false); // Show device login prompt\n  const [pendingToken, setPendingToken] = useState(null); // Token for forced login\n  const [pendingEmail, setPendingEmail] = useState(null); // Email for forced login\n\n\n  // ---------------- CAPTCHA STATE ----------------\n  const generateRandomCode = (length = 5) => {\n    const chars =\n      \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    let code = \"\";\n    for (let i = 0; i < length; i++) {\n      code += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return code;\n  };\n\n\n// ---------------- OTP ANIMATION STATE ----------------\n  const [randomCode, setRandomCode] = useState(generateRandomCode());\n  const [userCode, setUserCode] = useState(\"\");\n\n\n  // ---------------- OTP Animation State ----------------\n  const [otpError, setOtpError] = useState(false);\n  const [otpSuccess, setOtpSuccess] = useState(false);\n\n  // ---------------- Load remembered credentials ----------------\n useEffect(() => {\n const savedData = Cookies.get(\"rememberData\");\n  if (savedData) {\n    try {\n      const { email, password } = JSON.parse(savedData);\n      setInput({\n        email: email || \"\",\n        password: password ? decode(password) : \"\",\n      });\n      setRememberMe(true);\n    } catch {\n      setInput((prev) => ({ ...prev, email: savedData }));\n      setRememberMe(true);\n    }\n  }\n}, []);\n\n\n // ---------------- PLAY SUCCESS AUDIO ----------------\n  const veriFyOtpSound = () => {\n    try {\n      const OutSound = new Audio(audios); // use imported audio\n      OutSound.volume = 0.8;\n      OutSound.play().catch(() => {\n        console.warn(\"âš ï¸ Login sound playback blocked by browser until user interaction.\");\n      });\n    } catch (err) {\n      console.warn(\"âš ï¸ Audio play error:\", err.message);\n    }\n  };\n  // ---------------- OTP Countdown ----------------\n  useEffect(() => {\n    let interval;\n    if (showOtpForm && timer > 0) {\n      interval = setInterval(() => setTimer((prev) => prev - 1), 1000);\n    } else if (timer <= 0 && showOtpForm) {\n      setCanResend(true);\n      toast.error(\"OTP expired! Please resend.\");\n    }\n    return () => clearInterval(interval);\n  }, [showOtpForm, timer]);\n\n  // ---------------- Save Remember Me ----------------\n  const saveRememberMe = (email, password) => {\n    if (rememberMe) {\n      Cookies.set(\n        \"rememberData\",\n        JSON.stringify({ email, password: encode(password) }),\n        { expires: 30, secure: true, sameSite: \"Strict\" }\n      );\n    } else {\n      Cookies.remove(\"rememberData\");\n    }\n  };\n\n  // ---------------- Lockout Countdown ----------------\n  useEffect(() => {\n    let lockInterval;\n    if (lockTimer > 0) {\n      lockInterval = setInterval(() => setLockTimer((prev) => prev - 1), 1000);\n    }\n    return () => clearInterval(lockInterval);\n  }, [lockTimer]);\n\n  const formatTime = (sec) => {\n    const m = Math.floor(sec / 60).toString().padStart(2, \"0\");\n    const s = (sec % 60).toString().padStart(2, \"0\");\n    return `${m}:${s}`;\n  };\n\n  // ---------------- Send OTP / Login ----------------\n  const sendOtp = async () => {\n    if (lockTimer > 0) {\n      return toast.error(`Account locked! Try again in ${formatTime(lockTimer)}`);\n    }\n\n    try {\n      const response = await axios.post(\"/api/auth/users/login\", input, {\n        timeout: 6000,\n      });\n\n      if (response.data.otpSent) {\n        veriFyOtpSound();\n        toast.success(\"OTP sent to your email!\");\n\n        setShowOtpForm(true);\n        setUserEmail(input.email);\n        setOtp(\"\");\n        setTimer(180);\n        setCanResend(false);\n      } else if (response.data.token) {\n        // -------- Set Cookies --------\n        Cookies.set(\"token\", response.data.token, { expires: 7, secure: true, sameSite: \"Strict\" });\n        Cookies.set(\"name\", response.data.user?.Fname || \"\", { expires: 7, secure: true, sameSite: \"Strict\" });\n        Cookies.set(\"email\", response.data.user?.email || input.email, { expires: 7, secure: true, sameSite: \"Strict\" }); // NEW\n\n         saveRememberMe(input.email, input.password); //  Save Remember Me\n\n        if (rememberMe) {\n          Cookies.set(\n            \"rememberData\",\n            JSON.stringify({\n              email: input.email,\n              password: encode(input.password),\n            })\n          );\n        } else {\n          Cookies.remove(\"rememberData\");\n        }\n\n        toast.success(\"Login successful!\");\n        setFailedAttempts(0);\n        navigate(\"/\");\n      } else {\n        toast.error(\"Unexpected response from server\");\n      }\n    } catch (err) {\n      console.error(\"Send OTP error:\", err);\n      if (err.response?.status === 401) {\n        setFailedAttempts((prev) => {\n          const newCount = prev + 1;\n          if (newCount >= 5) {\n            setLockTimer(LOCK_DURATION);\n            toast.error(\"Too many failed attempts. Account locked for 15 minutes.\");\n            return 0;\n          } else {\n            toast.error(`Wrong credentials! Attempt ${newCount} of 5`);\n          }\n          return newCount;\n        });\n      } else {\n        toast.error(err.response?.data?.message || \"Login failed\");\n      }\n    }\n  };\n\n  // ---------------- Verify OTP ----------------\n  const handleOtpVerify = async (e) => {\n\n    e.preventDefault();\n    if (!otp) return toast.error(\"Please enter OTP\");\n\n    try {\n      const response = await axios.post(\n        \"/api/auth/verify-otp\",\n        { email: userEmail, otp },\n        { timeout: 10000 }\n      );\n\n      if (response.data.forceLogout) {\n        setShowDevicePrompt(true);\n        setPendingToken(response.data.token);\n        setPendingEmail(userEmail);\n        return;\n      }\n\n      // -------- Set Cookies --------\n      Cookies.set(\"token\", response.data.token, { expires: 7, secure: true, sameSite: \"Strict\" });\n      Cookies.set(\"name\", response.data.user?.Fname || \"\", { expires: 7, secure: true, sameSite: \"Strict\" });\n      Cookies.set(\"email\", response.data.user?.email || userEmail, { expires: 7, secure: true, sameSite: \"Strict\" });\n      \n      saveRememberMe(userEmail, input.password);// NEW\n\n      if (rememberMe) {\n        Cookies.set(\n          \"rememberData\",\n          JSON.stringify({\n            email: input.email,\n            password: encode(input.password),\n          }),\n          { expires: 30, secure: true, sameSite: \"Strict\" } // 30 days for Remember Me\n        );\n      } else {\n        Cookies.remove(\"rememberData\");\n      }\n\n      toast.success(\"OTP verified! Login successful\");\n      navigate(\"/\");\n    } catch (err) {\n      console.error(\"OTP verification error:\", err);\n      if (err.response?.status === 401) {\n        navigate(\"/session-expire\");\n      } else {\n        toast.error(err.response?.data?.message || \"OTP verification failed\");\n      }\n    }\n  };\n\n  // ---------------- Force Login ----------------\n  const forceLogin = async () => {\n    veriFyOtpSound();\n    try {\n      const response = await axios.post(\"/api/auth/users/forceLogout\", {\n        token: pendingToken,\n        email: pendingEmail,\n      });\n      if (response.data.token) {\n        Cookies.set(\"token\", response.data.token, { expires: 7, secure: true, sameSite: \"Strict\" });\n        Cookies.set(\"name\", response.data.user?.Fname || \"\", { expires: 7, secure: true, sameSite: \"Strict\" });\n        Cookies.set(\"email\", response.data.user?.email || pendingEmail, { expires: 7, secure: true, sameSite: \"Strict\" }); // NEW\n\n        saveRememberMe(input.email, input.password); \n\n        toast.success(\"Logged in successfully! Previous session ended.\");\n        setShowDevicePrompt(false);\n        navigate(\"/\");\n      } else {\n        toast.error(\"Force login failed: No token returned\");\n      }\n    } catch (err) {\n      console.error(\"Force login error:\", err);\n      toast.error(err.response?.data?.message || \"Force login failed\");\n      setShowDevicePrompt(false);\n    }\n  };\n\n  const cancelForceLogin = () => {\n    setShowDevicePrompt(false);\n    setPendingToken(null);\n    setPendingEmail(null);\n    setOtp(\"\");\n    toast.info(\"Login cancelled. Redirecting to login page...\");\n    navigate(\"/login\");\n  };\n\n  // ---------------- Google Login ----------------\n  const googleSign = async () => {\n\n    try {\n      const result = await signInWithPopup(auth, googleProvider);\n      const user = result.user;\n\n      const response = await axios.post(\n        \"/api/auth/users/google-login\",\n        {\n          email: user.email,\n          uid: user.uid,\n          name: user.displayName,\n          photoURL: user.photoURL,\n        },\n        { timeout: 10000 }\n      );\n\n      if (response.data.isNewUser) {\n        toast.info(\"Email not registered! Please register first.\");\n        setTimeout(() => navigate(\"/register\"), 3000);\n        return;\n      }\n\n      if (response.data.token) {\n        // -------- Set Cookies --------\n        Cookies.set(\"token\", response.data.token, { expires: 7, secure: true, sameSite: \"Strict\" });\n        Cookies.set(\"name\", user.displayName, { expires: 7, secure: true, sameSite: \"Strict\" });\n        Cookies.set(\"email\", user.email, { expires: 7, secure: true, sameSite: \"Strict\" }); // NEW\n\n        saveRememberMe(input.email, input.password); \n        toast.success(\"Login successful!\");\n        navigate(\"/\");\n      }\n    } catch (err) {\n      console.error(\"Google login error:\", err);\n      if (err.code === \"auth/account-exists-with-different-credential\") {\n        const methods = await fetchSignInMethodsForEmail(auth, err.customData.email);\n        toast.error(\n          `An account with this email already exists with ${methods[0]}. Please use that provider to login.`\n        );\n      } else if (err.code === \"auth/popup-closed-by-user\") {\n        toast.info(\"Login cancelled. You closed the popup.\");\n      } else if (err.code === \"auth/cancelled-popup-request\") {\n        toast.info(\"Cancelled popup request. Please try again.\");\n      } else {\n        toast.error(err.message || \"Google login failed\");\n      }\n    }\n  };\n\n  // ---------------- Facebook Login ----------------\n  const facebookSign = async () => {\n\n    const facebookProvider = new FacebookAuthProvider();\n\n    try {\n      const result = await signInWithPopup(auth, facebookProvider);\n      const user = result.user;\n\n      const response = await axios.post(\n        \"/api/auth/users/facebook-login\",\n        {\n          email: user.email,\n          uid: user.uid,\n          name: user.displayName,\n          photoURL: user.photoURL,\n        },\n        { timeout: 10000 }\n      );\n\n      if (response.data.forceLogout) {\n        setShowDevicePrompt(true);\n        setPendingToken(response.data.token);\n        setPendingEmail(user.email);\n        return;\n      }\n\n      if (response.data.token) {\n        // -------- Set Cookies --------\n        Cookies.set(\"token\", response.data.token, { expires: 7, secure: true, sameSite: \"Strict\" });\n        Cookies.set(\"name\", user.displayName, { expires: 7, secure: true, sameSite: \"Strict\" });\n        Cookies.set(\"email\", user.email, { expires: 7, secure: true, sameSite: \"Strict\" }); // NEW\n        toast.success(\"Facebook login successful!\");\n\n        saveRememberMe(input.email, input.password); \n        navigate(\"/\");\n      }\n    } catch (error) {\n      console.error(\"Facebook login error:\", error);\n      if (error.code === \"auth/account-exists-with-different-credential\") {\n        const methods = await fetchSignInMethodsForEmail(auth, error.customData.email);\n        toast.error(\n          `An account with this email already exists with ${methods[0]}. Please use that provider to login.`\n        );\n      } else if (error.code === \"auth/popup-closed-by-user\") {\n        toast.info(\"Login cancelled. You closed the popup.\");\n      } else if (error.code === \"auth/cancelled-popup-request\") {\n        toast.info(\"Cancelled popup request. Please try again.\");\n      } else {\n        toast.error(error.message || \"Facebook login failed\");\n      }\n    }\n  };\n\n  // ---------------- Render UI ----------------\n  if (lockTimer > 0) {\n    return (\n      <div className=\"bg-white p-6 rounded-lg shadow-md w-96 singform text-center\">\n        <ToastContainer position=\"top-right\" autoClose={3000} />\n        <h2 className=\"text-2xl font-bold mb-4 text-center\">Account Locked</h2>\n        <p className=\"mb-4 text-red-500\">Too many failed login attempts.</p>\n        <p className=\"text-gray-700\">Please try again after:</p>\n        <p className=\"text-xl font-bold mt-2\">{formatTime(lockTimer)}</p>\n        <button\n          className=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\"\n          onClick={() => navigate(\"/register\")}\n        >\n          Sign Up\n        </button>\n      </div>\n    );\n  }\n\n  if (showDevicePrompt) {\n    return (\n      <div className=\"bg-white p-6 rounded-lg shadow-md w-96 singform text-center\">\n        <ToastContainer position=\"top-right\" autoClose={3000} />\n        <h2 className=\"text-xl font-bold mb-4\">\n          âš ï¸ You're currently logged in on another device\n        </h2>\n        <p className=\"mb-4\">Logging in here will sign you out from that session.</p>\n        <div className=\"flex justify-around mt-4\">\n          <button\n            onClick={forceLogin}\n            className=\"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600\"\n          >\n            Proceed to Login\n          </button>\n          <button\n            onClick={cancelForceLogin}\n            className=\"px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500\"\n          >\n            Cancel\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white p-3 rounded-lg shadow-md w-96 singform gray-500 mag \">\n      <ToastContainer position=\"top-right\" autoClose={3000} />\n      <h2 className=\"text-2xl font-bold mb-4 text-center \">Login</h2>\n\n      {!showOtpForm ? (\n        <form className=\"space-y-3\">\n          {/* Email & Password */}\n          <p className=\"tex\">Email Address <span className=\"requiredStar\">*</span></p>\n          <div className=\"flex gap-2\">\n            <span className=\"w-8 m-auto \"><img src={emailicon} /></span>\n            <input\n              type=\"email\"\n              name=\"email\"\n              placeholder=\"Enter Email\"\n              value={input.email}\n              className=\"inputBox p-2 w-full border rounded\"\n              onChange={(e) => setInput({ ...input, [e.target.name]: e.target.value })}\n              required\n            />\n          </div>\n\n          <p className=\"tex\">Password <span className=\"requiredStar\">*</span></p>\n          <div className=\"relative flex\">\n            <span className=\"w-8 m-auto \"><img src={pwd} /></span>\n            <input\n              type={passwordVisible ? \"text\" : \"password\"}\n              name=\"password\"\n              placeholder=\"Enter Password\"\n              value={input.password}\n              className=\"inputBox p-2 w-full border rounded\"\n              onChange={(e) => setInput({ ...input, [e.target.name]: e.target.value })}\n              required\n            />\n            <span\n              className=\"absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer\"\n              onClick={() => setPasswordVisible(!passwordVisible)}\n            >\n              {passwordVisible ? \"Hide\" : \"ðŸ‘ï¸\"}\n            </span>\n          </div>\n\n          {/* Remember Me */}\n          <div className=\"flex items-center gap-2 mt-1\">\n            <input\n              type=\"checkbox\"\n              checked={rememberMe}\n              onChange={(e) => setRememberMe(e.target.checked)}\n              id=\"rememberMe\"\n              className=\"cursor-pointer\"\n            />\n            <label htmlFor=\"rememberMe\" className=\"cursor-pointer text-sm\">\n              Remember Me\n            </label>\n          </div>\n\n          {/* CAPTCHA */}\n          <div className=\"mt-2\">\n            <p className=\"flex tex items-center justify-between\">Enter the code below:</p>\n            <div className=\" flex gap-9\">\n              <span>\n                <Captcha\n                  code={randomCode}\n                  onChange={() => setRandomCode(generateRandomCode())}\n                />\n              </span>\n              <span className=\"ref-btn\">\n                <img\n                  src={refreshIcon}\n                  alt=\"refresh captcha\"\n                  className=\"refresh-icon w-8 m-2 \"\n                  onClick={() => setRandomCode(generateRandomCode())}\n                  style={{ cursor: \"pointer\", marginLeft: \"10px\" }}\n                />\n              </span>\n            </div>\n            <br />\n            <input\n              type=\"text\"\n              value={userCode}\n              placeholder=\"Type the code here\"\n              onChange={(e) => setUserCode(e.target.value)}\n              className=\"w-full p-2 border rounded\"\n            />\n          </div>\n\n          <button\n            type=\"button\"\n            onClick={sendOtp}\n            disabled={userCode !== randomCode}\n            className={`login w-full py-2 rounded mt-2 ${userCode === randomCode\n              ? \"bg-red-500 text-white\"\n              : \"bg-gray-300 text-yellow-100 cursor-not-allowed\"\n              }`}\n          >\n            Login\n          </button>\n\n          <p\n            className=\"singbtn w-full text-end underline font-medium cursor-pointer\"\n            onClick={() => navigate(\"/reset-password\")}\n          >\n            Forgot Password?\n          </p>\n\n          <p className=\"text-center my-3\">Or</p>\n\n          {/* Social Login */}\n          <button\n            type=\"button\"\n            onClick={googleSign}\n            className=\"social-button google-btn w-full mt-3\"\n          >\n            <img\n              src=\"https://www.google.com/favicon.ico\"\n              alt=\"Google Logo\"\n              className=\"icon\"\n            />\n            Continue with Google\n          </button>\n\n          <button\n            type=\"button\"\n            onClick={facebookSign}\n            className=\"social-button facebook-btn w-full mt-2 bg-blue-600 text-white flex items-center justify-center gap-2 py-2 rounded hover:bg-blue-700\"\n          >\n            <img\n              src=\"https://www.facebook.com/images/fb_icon_325x325.png\"\n              alt=\"Facebook Logo\"\n              className=\"icon w-5 h-5\"\n            />\n            Continue with Facebook\n          </button>\n\n          {/* <a href=\"#\" className=\"social-button apple-btn mt-2 w-full flex items-center justify-center gap-2\">\n            <img\n              src=\"https://th.bing.com/th/id/R.1ec11a869384bc5e59625bac39b6a099?rik=1dlGqAp84GWGFw&riu=http%3a%2f%2fpngimg.com%2fuploads%2fapple_logo%2fapple_logo_PNG19692.png&ehk=5ghp5P0aLzQqfUKTsPihTYaIP%2b4VcHGKNovcBq8KOuo%3d&risl=&pid=ImgRaw&r=0\"\n              alt=\"Apple Logo\"\n              className=\"icon\"\n            />\n            Continue with Apple\n          </a> */}\n\n          <p className=\"text-sm text-center mt-3\">\n            Donâ€™t have an account?{\" \"}\n            <span\n              className=\"singbtn cursor-pointer font-medium underline\"\n              onClick={() => navigate(\"/register\")}\n            >\n              Sign Up\n            </span>\n          </p>\n        </form>\n      ) : (\n        <form onSubmit={handleOtpVerify} className=\"space-y-3\">\n          <p>Enter the 6-digit OTP sent to {userEmail}</p>\n          <div\n            className={`flex justify-between gap-2 mb-2 transition-transform duration-300 ${otpError ? \"animate-shake\" : otpSuccess ? \"animate-glow\" : \"\"\n              }`}\n          >\n            {[0, 1, 2, 3, 4, 5].map((i) => {\n              const isDigitValid = /^\\d$/.test(otp[i] || \"\");\n              return (\n                <input\n                  key={i}\n                  type=\"text\"\n                  maxLength={1}\n                  value={otp[i] || \"\"}\n                  id={`otp-${i}`}\n                  className={`w-12 h-12 text-center border rounded-md text-xl transition focus:ring-2 focus:ring-blue-400 ${otp[i]\n                      ? isDigitValid\n                        ? \"border-green-500\"\n                        : \"border-red-500\"\n                      : \"border-gray-300\"\n                    }`}\n                  onChange={(e) => {\n                    const val = e.target.value;\n                    if (!/^\\d?$/.test(val)) return; // only digits\n                    const newOtp = otp.split(\"\");\n                    newOtp[i] = val;\n                    setOtp(newOtp.join(\"\"));\n\n                    // auto-focus next input\n                    if (val && i < 5) {\n                      const nextInput = document.getElementById(`otp-${i + 1}`);\n                      nextInput && nextInput.focus();\n                    }\n                  }}\n                  onKeyDown={(e) => {\n                    // Handle backspace\n                    if (e.key === \"Backspace\") {\n                      e.preventDefault(); // prevent default backspace behavior\n                      const newOtp = otp.split(\"\");\n                      newOtp[i] = \"\"; // clear current box\n                      setOtp(newOtp.join(\"\"));\n\n                      if (i > 0) {\n                        const prevInput = document.getElementById(`otp-${i - 1}`);\n                        prevInput && prevInput.focus();\n                      }\n                    }\n                  }}\n                  onPaste={(e) => {\n                    e.preventDefault();\n                    const pasteData = e.clipboardData.getData(\"Text\").trim().slice(0, 6);\n                    if (!/^\\d+$/.test(pasteData)) return; // only allow digits\n                    const pasteArray = pasteData.split(\"\");\n                    const newOtp = [...otp.split(\"\")];\n                    for (let j = 0; j < 6; j++) {\n                      newOtp[j] = pasteArray[j] || \"\";\n                    }\n                    setOtp(newOtp.join(\"\"));\n\n                    \n                    const nextInput = document.getElementById(`otp-${pasteArray.length - 1}`);\n                    nextInput && nextInput.focus();\n                  }}\n                />\n              );\n            })}\n          </div>\n\n          <p className=\"text-sm text-gray-500\">\n            OTP expires in: <span className=\"font-semibold\">{formatTime(timer)}</span>\n          </p>\n          <button\n            type=\"submit\"\n            className=\"login w-full bg-green-500 text-white py-2 rounded\"\n          >\n            Verify OTP\n          </button>\n          <button\n            type=\"button\"\n            disabled={!canResend}\n            onClick={sendOtp}\n            className={`w-full py-2 rounded ${canResend ? \"bg-blue-500 text-white\" : \"bg-gray-300 text-gray-500 cursor-not-allowed\"}`}\n          >\n            Resend OTP\n          </button>\n        </form>\n      )}\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}